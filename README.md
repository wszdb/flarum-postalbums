# Flarum 帖子专辑扩展

[English](README_EN.md) | 简体中文

一个功能强大的 Flarum 扩展，类似Discuz!的淘专辑，允许用户创建专辑来收藏和组织论坛中的帖子。

## ✨ 功能特性

### 📚 专辑管理
- **创建专辑**：用户可以创建自己的专辑，设置标题和简介
- **收藏帖子**：支持收藏主题帖和回复帖
- **自定义标题**：可以为收藏的回复帖设置自定义标题
- **专辑编辑**：随时编辑专辑信息和管理收藏内容

### 🎯 专辑广场
- **浏览专辑**：查看所有用户创建的公开专辑
- **多种排序**：支持最新创建、关注最多、随机排序三种方式
- **搜索功能**：快速搜索感兴趣的专辑
- **关注专辑**：关注喜欢的专辑，方便后续查看

### 👤 个人中心
- **我的专辑**：管理自己创建的所有专辑
- **我的关注**：查看关注的专辑列表
- **一键收藏**：在帖子页面一键添加到专辑

### ⚙️ 后台管理
- **灵活配置**：丰富的后台设置选项
- **权限控制**：控制游客访问权限
- **长度限制**：自定义标题和简介的长度限制
- **数量控制**：限制用户创建专辑数量和专辑收藏数量
- **分页设置**：自定义每页显示数量

## 📋 系统要求

- Flarum 1.0 或更高版本
- PHP 7.3 或更高版本
- MySQL 5.7+ 或 MariaDB 10.2+

## 🚀 安装

通过 Composer 安装：

```bash
composer require wszdb/flarum-postalbums
```

安装后，在 Flarum 管理后台启用扩展。

## 🔧 配置

安装启用后，进入管理后台 → 扩展 → 帖子专辑，可以配置以下选项：

### 基础设置
- **前台显示名称**：自定义功能在前台的显示名称
- **允许游客访问**：控制未登录用户是否可以查看专辑

### 长度限制
- **专辑标题最大长度**：默认 100 字符
- **专辑简介最大长度**：默认 500 字符
- **回复帖默认截取长度**：默认 50 字符

### 数量限制
- **每个用户最多创建专辑数**：默认 10 个
- **每个专辑最多收藏数**：默认 1000 个

### 显示设置
- **专辑列表每页显示数**：默认 20 个
- **专辑详情每页显示数**：默认 10 个
- **专辑默认排序方式**：最新创建/关注最多/随机排序

## 📖 使用说明

### 创建专辑
1. 点击论坛左侧导航的"帖子专辑"
2. 点击"创建专辑"按钮
3. 填写专辑标题和简介
4. 提交后自动跳转到"我的专辑"

### 收藏帖子
1. 在任意帖子页面，点击"加入专辑"按钮
2. 选择要添加到的专辑
3. 确认后即可完成收藏

### 管理专辑
1. 进入"我的专辑"标签
2. 点击专辑进入详情页
3. 可以编辑专辑信息、删除收藏项、修改自定义标题

### 关注专辑
1. 在专辑广场或专辑详情页
2. 点击"关注"按钮
3. 在"我的关注"中查看关注的专辑

## 🎨 特色功能

### 智能标题
- 主题帖：自动使用主题标题
- 回复帖：默认截取前 N 个字符（可配置）
- 支持用户自定义修改标题

### 随机排序
- 有收藏内容的专辑优先显示
- 同组内随机排列
- 每次刷新顺序变化

### 空专辑保护
- 没有收藏内容的专辑不允许被关注
- 防止无效专辑占用资源

## 🔒 安全特性

- 完整的权限验证
- SQL 注入防护
- XSS 攻击防护
- CSRF 令牌验证
- 数据验证和清理

## 🤝 贡献

欢迎提交问题和拉取请求！

## 📄 许可证

MIT License

## 👨‍💻 作者

- **wszdb**
- Email: zzdogtxt@gmail.com
- GitHub: [wszdb/flarum-postalbums](https://github.com/wszdb/flarum-postalbums)

## 🙏 致谢

感谢 Flarum 社区的支持和帮助！

---


如果这个扩展对您有帮助，欢迎 ⭐ Star 支持！
